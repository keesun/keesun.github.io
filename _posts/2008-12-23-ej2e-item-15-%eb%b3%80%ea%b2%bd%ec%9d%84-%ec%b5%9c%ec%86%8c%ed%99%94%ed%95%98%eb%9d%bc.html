---
layout: post
title: EJ2E Item 15. 변경을 최소화하라
date: 2008-12-23 12:52:02.000000000 -08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Java
tags:
- effective java
- immutable
meta:
  arkayne-cache-post: |2+







    <!-- BlogGlue Plugin Error -->
    <!-- This page cannot be linked by BlogGlue. -->
    <!-- You need a valid token. Get one at the URL below. -->
    <!-- http://www.blogglue.com/login/ -->

















  arkayne-time-post: '1323008993'
author:
  login: whiteship
  email: whiteship2000@gmail.com
  display_name: 기선
  first_name: 기선
  last_name: 백
---
<p>참조: Effective Java 2nd Editio Item 15: Minimize mutability</p>
<p>자바에는 다양한 Immutable 클래스들이 있는데, 그 이유는.. 불변 클래스가 변하는(mutable) 클래스보다 설계하고 구현하고 사용하기 쉽기 때문이다.</p>
<p>불변 클래스를 만드는 다섯 가지 규칙<br />
1. 객체의 상태를 바꾸는 메소드를 제공하지 말라.<br />
2. 클래스를 확장할 수 없도록 해라.<br />
3. 모든 필드를 final로 하라.<br />
4. 모든 필드를 private으로 하라.<br />
<span style="font-weight: bold;">5. 변경 가능한 요소에는 상호 배타적으로 접근하도록 하라.</span>(불변 클래스가 변하는 필드를 가지고 있을 때, 클라이언트가 해당 객체에 대한 레퍼런스를 가지지 못하게 하라. defensive copies를 생성자나 aceessor에서 만들고 readObject 메소드를 만들어라. @_@)</p>
<p>별로 안 간단해 보이는데;;; 간단하데요</p>
<p>불변 객체는 당연히 쓰레드-세이프 하다. 따라서 동기화 필요 없다. 자유롭게 공유해서 쓰면 된다.</p>
<p>단점은 매번 별도의 객체를 필요로 한다는 것이다. 비싼 객체는 좀.. 글켔군요.</p>
<p>상속을 막는 방법이 클래스를 final로 만드는 거 말고 좀 더 유연한 방법이 있다. 모든 생성자를 private 또는 package-private으로 만들고 public static 팩터리를 만드는 거다. 같은 패키지에서는 상속해서 다양한 구현체를 만들 수 있지만 해당 패키지 밖에서 참조할 땐 final 클래스와 마찬가지니깐... 오호.. 천젠데;;</p>
<p>어떤 클래스를 <span style="text-decoration: line-through;">불편</span> 불변 클래스로 만들어야 할까? 고민해본 적이 없네... 집에 가면서 생각해보자.. 굳이 바뀔 필요가 없는 클래스도 필요 없이 setter를 전부 만들진 않았을까..</p>
<p></p>
