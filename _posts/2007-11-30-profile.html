---
layout: post
title: Profile
date: 2007-11-30 04:12:32.000000000 -08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Maven
tags:
- maven
- profile
meta:
  arkayne-cache-post: |2+







    <!-- BlogGlue Plugin Error -->
    <!-- This page cannot be linked by BlogGlue. -->
    <!-- You need a valid token. Get one at the URL below. -->
    <!-- http://www.blogglue.com/login/ -->

















  arkayne-time-post: '1323147416'
author:
  login: whiteship
  email: whiteship2000@gmail.com
  display_name: 기선
  first_name: 기선
  last_name: 백
---
<p>Maven에 있는 Profile의 주 목적은 서로 다른 빌드 환경간의 portability입니다. 개발 환경, 테스트 환경, 성능 테스트 환경, 클라이언트 환경 등 상상할 수 있는 모든 환경에 단일 프로젝트를 이식할 수 있도록 합니다.</p>
<p><span style="font-weight: bold;">Portability 종류</span></p>
<p>Non-Portability</p>
<p>이런 프로젝트는 오직 특정한 환경에서만 빌드를 할 수 있습니다. 프로젝트를 다른 환경으로 이식할 계획이 없다면 그냥 이렇게 사용해도 상관없습니다.</p>
<p>Environmental Protability</p>
<p>테스트 환경에서는 테스트 데이터베에스를 참조하고, 배고 환경에서는 배포용 데이터베이스를 참조할 수 있는 프로젝트입니다. 하지만 프로파일이 만들어져이지 않은 환경으로 이식한다면, 해당 프로젝트는 동작하지 않을 것입니다. 따라서 오직 정의되어 있는 환경으로만 이식할 수 있습니다.</p>
<p>In-House Portability</p>
<p>특정한 도구나 연결 접근이 필요한 프로젝트를 말합니다.</p>
<p>Wide Portability</p>
<p>Maven에서는 wide portability 프로젝트 소스를 누구나 다운받을 수 있습니다. 프로젝트를 빌드하려는 사람이 어떠한 추가작업도 필요로하지 않을때 Wide Portablilty 프롤젝트라고 합니다. 예를 들어, MySQL을 사용한다면, 해당 프로젝트를 빌드 할 때 MySQL이 없는 사람은 설치를 해야합니다. 이런 프로젝트는 Wide Protability를 가졌다고 할 수 없습니다. 반면에, HSQLDB를 사용한다면, hsql.jar 종속성을 추가하면 되기떄문에 widely protable합니다.</p>
<p>가능하면 프로젝트를 최대한 이식성이 좋도록하는 것이 목적입니다. 이식성이 넓어질 수록 빌드 작업을 하는 사람의 수고를 덜 수 있습니다. Maven의 Profile은 특정 환경의 기본 값이 설정 값들을 대체할 수 있습니다. Maven을 사용하면, Non-portable 프로젝트를 Environmentally portable 프로젝트로 변경시킬 수 있습니다.</p>
<p><span style="font-weight: bold;">POM Profiles</span></p>
<p>project 엘리먼트 내부에 profiles 엘리먼트 안에 모든 가용한 설정들을 합니다. 그 안에서 설정할 수 있는 엘리먼트들은 project 엘리먼트 레벨에서 사용할 수 있는 것들과 동일합니다.</p>
<div style="border: 1px solid rgb(204, 204, 204); padding: 10px; background-color: rgb(247, 247, 247);">&lt;project&gt;<br />&nbsp; ...<br />&nbsp; <span style="font-weight: bold;">&lt;profiles&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &lt;profile&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; ...</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;reporting&gt;...&lt;/reporting&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;modules&gt;...&lt;/modules&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;dependencies&gt;...&lt;/dependencies&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;dependencyManagement&gt;...&lt;/dependencyManagement&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;distributionManagement&gt;...&lt;/distributionManagement&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;repositories&gt;...&lt;/repositories&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;pluginRepositories&gt;...&lt;/pluginRepositories&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;properties&gt;...&lt;/properties&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &lt;/profile&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &lt;/profiles&gt;</span><br />&lt;/project&gt;</div>
<p><span style="font-weight: bold;">Activation</span></p>
<p>activation 엘리먼트는 오직 profile 엘리먼트 내부에서만 사용할 수 있으며, 이 엘리먼트에 정의한 환경과 실행 환경이 일치하면 profile에 설정한 값들이 project에 설정한 값들을 대체합니다.</p>
<div style="border: 1px solid rgb(204, 204, 204); padding: 10px; background-color: rgb(247, 247, 247);">&lt;project&gt;<br />&nbsp; ...<br />&nbsp; &lt;profiles&gt;<br />&nbsp; &nbsp; &lt;profile&gt;<br />&nbsp; &nbsp; &nbsp; &lt;id&gt;dev&lt;/id&gt;<br />&nbsp; &nbsp; &nbsp; <span style="font-weight: bold;">&lt;activation&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;jdk&gt;1.5&lt;/jdk&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;os&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;Windows XP&lt;/name&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;family&gt;Windows&lt;/family&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;arch&gt;x86&lt;/arch&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;5.1.2600&lt;/version&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/os&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;property&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;mavenVersion&lt;/name&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;2.0.5&lt;/value&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/property&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;file&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;exists&gt;file2.properties&lt;/exists&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;missing&gt;file1.properties&lt;/missing&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/file&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;/activation&gt;</span><br />&nbsp; &nbsp; &nbsp; ...<br />&nbsp; &nbsp; &lt;/profile&gt;<br />&nbsp; &lt;/profiles&gt;<br />&lt;/project&gt;</div>
<p><span style="font-weight: bold;">Build</span></p>
<p>profile의 build 엘리먼트는 POM의 build 엘리먼트의 서브셋에 해당하는 정보를 가지고 있습니다.</p>
<div style="border: 1px solid rgb(204, 204, 204); padding: 10px; background-color: rgb(247, 247, 247);">&lt;project&gt;<br />&nbsp; ...<br />&nbsp; &lt;profiles&gt;<br />&nbsp; &nbsp; &lt;profile&gt;<br /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;build&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;defaultGoal&gt;install&lt;/defaultGoal&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;directory&gt;${basedir}/target&lt;/directory&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;finalName&gt;${artifactId}-${version}&lt;/finalName&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;filters&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;filter&gt;filters/filter1.properties&lt;/filter&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/filters&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;resources&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;resource&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;targetPath&gt;META-INF/plexus&lt;/targetPath&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;filtering&gt;false&lt;/filtering&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;directory&gt;${basedir}/src/main/plexus&lt;/directory&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;includes&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;include&gt;configuration.xml&lt;/include&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/includes&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;excludes&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;exclude&gt;**/*.properties&lt;/exclude&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/excludes&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/resource&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/resources&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;testResources&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;testResource&gt;...&lt;/testResource&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/testResources&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;plugins&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;plugin&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;1.1&lt;/version&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;extensions&gt;false&lt;/extensions&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;inherited&gt;true&lt;/inherited&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;configuration&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;sourceRoot&gt;${project.build.directory}/generated-sources&lt;/sourceRoot&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/configuration&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dependencies&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;dependency&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;ant&lt;/groupId&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;ant-optional&lt;/artifactId&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;version&gt;1.5.2&lt;/version&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dependency&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/dependencies&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;executions&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;execution&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;id&gt;echodir&lt;/id&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;goals&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;goal&gt;run&lt;/goal&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/goals&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;phase&gt;verify&lt;/phase&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;inherited&gt;false&lt;/inherited&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;configuration&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tasks&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;echo&gt;Build Dir: ${project.build.directory}&lt;/echo&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/tasks&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/configuration&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/execution&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/executions&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugin&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugins&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;pluginManagement&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;plugins&gt;...&lt;/plugins&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/pluginManagement&gt;</span><br style="font-weight: bold;" /><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &lt;/build&gt;</span><br />&nbsp; &nbsp; &lt;/profile&gt;<br />&nbsp; &lt;/profiles&gt;<br />&lt;/project&gt;</div>
<p><span style="font-weight: bold;">External Profiles</span></p>
<p>proflie들을 POM에서 빼내고 싶을 수 있습니다. 이럴 때는 \${basedir}에 profilesxml을 생성하고 그 안에 profiles 엘리먼트를 넣어주면 됩니다.</p>
<p><span style="font-weight: bold;">Settings Profiles</span></p>
<p>settings.xml에서도 profile을 설정할 수 있는데, 이 것은 project의 profile과 기능은 같으나, project의 profile은 여러 시스템들 중에 특정한 설정 값을 overriding 할 때 사용하고, settings의 profile은 모든 시스템 통채를 대상으로 합니다.</p>
<p>activeProfiles 엘리먼트를 사용하여 모든 빌드에서 자동으로 동작시킬 profile을 지정할 수 있습니다. 물론 이때의 profile은 project의 profile이 아니라 settings의 profile입니다.</p>
<div style="border: 1px solid rgb(204, 204, 204); padding: 10px; background-color: rgb(247, 247, 247);">&lt;settings&gt;<br />&nbsp; ...<br />&nbsp; &lt;activeProfiles&gt;<br />&nbsp; &nbsp; &lt;activeProfile&gt;dev&lt;/activeProfile&gt;<br />&nbsp; &lt;/activeProfiles&gt;<br />&lt;/settings&gt;</div>
<p>어렵네요. -_-;;</p>
