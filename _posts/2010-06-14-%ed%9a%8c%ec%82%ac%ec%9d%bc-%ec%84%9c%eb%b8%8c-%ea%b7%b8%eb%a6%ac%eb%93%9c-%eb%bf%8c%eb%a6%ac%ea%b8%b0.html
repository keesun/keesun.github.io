---
layout: post
title: "[회사일] 서브 그리드 뿌리기"
date: 2010-06-14 09:53:52.000000000 -07:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- SLT
tags:
- "@JsonIgnore"
meta:
  arkayne-cache-post: |2+







    <!-- BlogGlue Plugin Error -->
    <!-- This page cannot be linked by BlogGlue. -->
    <!-- You need a valid token. Get one at the URL below. -->
    <!-- http://www.blogglue.com/login/ -->

















  arkayne-time-post: '1322562679'
author:
  login: whiteship
  email: whiteship2000@gmail.com
  display_name: 기선
  first_name: 기선
  last_name: 백
---
<p><img src="{{ site.baseurl }}/assets/cfile23.uf.203531014C15F7A13C00E1.jpg" class="aligncenter" width="600" height="436" alt="" filename="3.jpg" filemime="image/jpeg" /></p>
<div id="">계정 정보 뷰 화면에 권한 정보를 뿌리도록 서브 그리드를 추가합니다.</div>
<div id="">
</div>
<div id="">
화면 코드에서는 jqGrid를 사용해서 코드를 작성합니다.</div>
<div id="">
</div>
<div id="">
<div id=""></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="">
&nbsp;&nbsp; &nbsp;&lt;p class="ui-widget-content"&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;h2 class="smdis-pane-title" id="smdis-grid-title"&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;ul class="smdis-left-icons"&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li id="smdis-add-button" class="ui-state-default ui-corner-all" title="권한 추가"&gt;&lt;span class="ui-icon ui-icon-plusthick"&gt;&lt;/span&gt;&lt;/li&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li id="smdis-delete-refresh" class="ui-state-default ui-corner-all" title="권한 삭제"&gt;&lt;span class="ui-icon ui-icon-minusthick"&gt;&lt;/span&gt;&lt;/li&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/ul&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;${model.loginId} 권한 정보</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;/h2&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;table id="smdis-sub-grid"&gt;&lt;/table&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&lt;div id="smdis-sub-pager"&gt;&lt;/div&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp;&lt;/p&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp;&lt;script type="text/javascript"&gt;</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;$(function(){</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$("#smdis-sub-grid").jqGrid({</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;colNames:['id', '이름', '설명'],</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;colModel :[</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{name:'id', index:'id', width:55, hidden:true},</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{name:'name', index:'name', width:100},</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{name:'descr', index:'descr', width:100}</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;],</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pager: '#smdis-sub-pager',</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b>url:'${baseUrl}/${model.id}/rights'</b></div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});</div>
<div id="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;});</div>
<div id="">&nbsp;&nbsp; &nbsp;&lt;/script&gt;</div>
</div>
<div id="">
</div>
<div id="">
</div>
<div id="">빨간 부분을 그리는데 이런 코드가 필요했습니다. 아직 버튼에 이벤트를 안달아서;; 좀 더 코드가 늘것 같네요. 일단은 서브 그리드를 그리는 기능만 만들겠습니다.</div>
<div id="">
</div>
<div id="">
중요한 저 그리드에서 사용할 URL 핸들러를 만드는 거죠.</div>
<div id="">
</div>
<div id="">
<div id=""></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="">
@Controller</div>
<div id="">@RequestMapping("/system/member")</div>
<div id="">public class MemberController extends GenericController&lt;MemberService, MemberRef, Member, MemberSearchParam&gt; {</div>
<div id="">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<b>&nbsp;&nbsp; &nbsp;@RequestMapping("/{id}/rights")</b></div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"><b>&nbsp;&nbsp; &nbsp;public void rights(@PathVariable int id, Model model, PageParam pageParam){</b></div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"><b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;model.addAttribute("list", service.rightListOfMember(id, pageParam));</b></div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"><b>&nbsp;&nbsp; &nbsp;}</b></div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">MemberController에 핸들러를 추가합니다. 평범해 보이지만 스프링 3.0 컨텐츠 네고 기능을 타고 JSON으로 바껴서 보내지게 됩니다. (물론 브라우저 주소창에 저 URL을 입력하면 JSP 페이지를 찾다가 원하는 페이지가 없다고 404 에러 코드가 보여지겠죠.)</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
public interface MemberService extends GenericService&lt;Member, MemberSearchParam&gt;{</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;List&lt;Right&gt; rightListOfMember(int id, PageParam pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">MemberService 인터페이스를 타고..&nbsp;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
@Service</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">@Transactional</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">public class MemberServiceImpl extends GenericServiceImpl&lt;MemberDao, Member, MemberSearchParam&gt; implements MemberService {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Autowired RightService rightService;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Override</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;public List&lt;Right&gt; rightListOfMember(int id, PageParam pageParam) {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Member member = dao.getById(id);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return rightService.listOfMember(member, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">MemberServiceImpl에 와서.. id에 해당하는 Member를 꺼내주고 나머진 RightService에 위임합니다.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">public interface RightService extends GenericService&lt;Right, RightSearchParam&gt;{</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;List&lt;Right&gt; listOfMember(Member member, PageParam pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
그럼 RightService 인터페이스를 타고..</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
@Service</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">@Transactional</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">public class RightServiceImpl extends GenericServiceImpl&lt;RightDao, Right, RightSearchParam&gt; implements RightService{</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;public List&lt;Right&gt; listOfMember(Member member, PageParam pageParam) {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pageParam.initCurrentPageInfosWith(member.getRights().size());</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return dao.listOf(member, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">RightServcieImpl에서는 PageParam 값을 설정하고, DB에 다녀와야 할 일은 RightDao로 위임합니다.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
public interface RightDao extends GenericDao&lt;Right, RightSearchParam&gt; {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;List&lt;Right&gt; listOf(Member member, PageParam pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">그럼 RightDao 인터페이스를 타고..</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
@Repository</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">public class RightDaoImpl extends GenericDaoImpl&lt;Right, RightSearchParam&gt; implements RightDao {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;protected void applySearchParam(Criteria c, RightSearchParam rightSearchParam) {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;CriteriaUtils.addOptionalLike(c, "name", rightSearchParam.getName());</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;public List&lt;Right&gt; listOf(Member member, PageParam pageParam) {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Criteria c = getCriteriaOf(Right.class);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;c.createAlias("members", "m");</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;c.add(Restrictions.eq("m.id", member.getId()));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;applyPagingParam(c, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;applyOrderingParam(c, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return c.list();</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div>여기서 member가 가지고 있는 권한 목록을 가져옵니다.</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">public class RightDaoImplTest extends SpringTest {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Autowired RightDao rightDao;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Test</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;public void di(){</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(rightDao, is(notNullValue()));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Test</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;public void listOf() throws Exception {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;insertXmlData("testData.xml");</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Member member = new Member();</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;member.setId(1);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;PageParam pageParam = new PageParam();</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pageParam.setRows(20);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pageParam.setPage(0);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;List&lt;Right&gt; rights = rightDao.listOf(member, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(rights.size(), is(2));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Right right = (Right)rights.get(0);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(right.getId(), is(1));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(right.getName(), is("admin"));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&lt;dataset&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"><span class="Apple-tab-span" style="white-space:pre">	</span>&lt;member id="1" loginid="whiteship" password="1" email="email@com" name="기선" /&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;&lt;rights id="1" name="admin"/&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;&lt;rights id="2" name="user"/&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;&lt;member_rights members_id="1" rights_id="1"/&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;&lt;member_rights members_id="1" rights_id="2"/&gt;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&lt;/dataset&gt;</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div>
DAO 테스트에서는 원하는 Right를 가져오는지 확인합니다.</div>
<div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown"></div>
<div class="txc-textbox" style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: rgb(203, 203, 203); border-right-color: rgb(203, 203, 203); border-bottom-color: rgb(203, 203, 203); border-left-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; ">
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp;@Test</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;public void listOfMember() throws Exception {</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;insertXmlData("testData.xml");</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Member member = memberDao.getById(1);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;PageParam pageParam = new PageParam();</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pageParam.setPage(0);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pageParam.setRows(20);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;List&lt;Right&gt; rs = rightService.listOfMember(member, pageParam);</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(pageParam.getListSize(), is(2));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;assertThat(pageParam.getTotalPageSize(), is(1));</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">&nbsp;&nbsp; &nbsp;}</div>
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">서비스 테스트에서는 PageParam에 값이 잘 설정되는지 확인했습니다.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
이제 잘 될 줄 알고 서버를 켜고 돌려봤더니.. 이런;;;</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<img src="{{ site.baseurl }}/assets/cfile22.uf.17628F264C15F9A14D7AB4.jpg" class="aligncenter" width="600" height="466" alt="" filename="4.jpg" filemime="image/jpeg" />
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
이런 문제가 생기더군요. 물론 그리드에도 제대로 표시가 되지 않았습니다.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
Member &lt;--&gt; Right 양방향 관계로 설정했을 때 쌍방에서 가지고 있는 rights나 members가 비어있더라도 JSON 뷰로 넘어갔을 때 OSIV 필터에 의해서 무조건 값을 읽어오게 됩니다. 실제로 해당 레퍼런스가 아주 null이었으면 가져오려는 시도도 안할텐데 null도 아닙니다. Member나 Right에서 초기화 해준적도 없는데도 null이 아닙니다. 그건 하이버네이트 Lazy loading 하려고 프록시 객체를 만들어 놔서 그런것 같더군요. 어떻게 막아야 하나... 고민을 했습니다.</div>
<div>
</div>
<div>
프로젝션과 DTO로 해결하려고 했으나.. 실패.&nbsp;</div>
<div>
</div>
<div>
흠.. JSON으로 만들지 않았으면 좋겠는데.. 그런거 없나 찾아보다 @JsonIgnore 발견.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">그걸 적용해서 성공했습니다.</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
<img src="{{ site.baseurl }}/assets/cfile27.uf.163537014C15FC1B81CA95.jpg" class="aligncenter" width="600" height="454" alt="" filename="5.jpg" filemime="image/jpeg" /></div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
</div>
<div id="aeaoofnhgocdbnbeljkmbjdmhbcokfdb-mousedown">
휴.. 집에가야지</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
