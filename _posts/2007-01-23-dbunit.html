---
layout: post
title: DbUnit
date: 2007-01-23 08:32:23.000000000 -08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- study
tags:
- DB test
- DbUnit
meta:
  arkayne-cache-post: |2+







    <!-- BlogGlue Plugin Error -->
    <!-- This page cannot be linked by BlogGlue. -->
    <!-- You need a valid token. Get one at the URL below. -->
    <!-- http://www.blogglue.com/login/ -->

















  arkayne-time-post: '1323090267'
author:
  login: whiteship
  email: whiteship2000@gmail.com
  display_name: 기선
  first_name: 기선
  last_name: 백
---
<p>참조 : <a href="http://www.dbunit.org/index.html" target="_blank">http://www.dbunit.org/index.html</a></p>
<p>Test 할 때 사용할 DB에 있는 값을 XML로 뽑아 내거나 XML에 입력한 데이타를 DB로 넣을 수 있는 오픈소스입니다. JUnit이랑 이름이 비슷한데 JUnit을 확장시킨 거라고 하네요.</p>
<p>사용하는 방법은 <a href="http://www.dbunit.org/howto.html" target="_blank">여기</a>에 나와있지만 잘 모르겠습니다.</p>
<div style="padding: 10px; background-color: rgb(250, 255, 169);">대강 본 바로는 xml에 각 테이블에 들어갈 데이타 들을 입력하고<br />FlatXmlDataSet 클래스를 이용해서 xml을 을 읽어들이고(ex. IDataSet)<br />읽어 들인 값을 집어 넣을 DB 커넥션을 설정(ex. IDatabaseConnection)해주면 DB에 들어가는 것 같습니다.<br />그리고 Assertion 이라는 클래스가 만들어져 있어서 ITable이나 IDataSet 끼리 assertEqulas 메소드를 사용해서 비교할 수 있습니다.</div>
<p>물개 선생님의 코드중 일부를 보시면 다음과 같습니다.<font size="2"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><span style="">&nbsp;&nbsp; </span></span><b><span style="color: rgb(127, 0, 85); font-family: 'Courier New';" lang="EN-US"></p>
<div style="padding: 10px; background-color: rgb(255, 218, 237);">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font size="2"><b><span style="color: rgb(127, 0, 85); font-family: 'Courier New';" lang="EN-US">public</span></b><span style="color: black; font-family: 'Courier New';" lang="EN-US"> </span><b><span style="color: rgb(127, 0, 85); font-family: 'Courier New';" lang="EN-US">void</span></b><span style="color: black; font-family: 'Courier New';" lang="EN-US"> testSampleData() </span><b><span style="color: rgb(127, 0, 85); font-family: 'Courier New';" lang="EN-US">throws</span></b><span style="color: black; font-family: 'Courier New';" lang="EN-US"> Exception {</span><span style="font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font size="2"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><span style="">&nbsp; &nbsp; &nbsp; </span>insertFlatXmlDataSet(</span><span style="color: rgb(42, 0, 255); font-family: 'Courier New';" lang="EN-US">"test/src/seal/sampleData.xml"</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">);</span><span style="font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font size="2"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><span style="">&nbsp; &nbsp; &nbsp; </span><i>assertEquals</i>(3, </span><span style="color: rgb(0, 0, 192); font-family: 'Courier New';" lang="EN-US">memberDao</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">.getAll().size());</span><span style="font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font size="2"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><span style="">&nbsp; &nbsp; &nbsp; </span></span></font><font size="2"><span style="color: rgb(0, 0, 192); font-family: 'Courier New';" lang="EN-US">memberDao</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">.getMembers(</span><span style="color: rgb(42, 0, 255); font-family: 'Courier New';" lang="EN-US">"seal"</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">).get(0).getEmail());</span><span style="font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font size="2"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><span style="">&nbsp; &nbsp; &nbsp; </span><i>assertEquals</i>(2, </span><span style="color: rgb(0, 0, 192); font-family: 'Courier New';" lang="EN-US">memberDao</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">.getMembers(</span><span style="color: rgb(42, 0, 255); font-family: 'Courier New';" lang="EN-US">"s"</span><span style="color: black; font-family: 'Courier New';" lang="EN-US">).size());</span><span style="font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="color: black; font-family: 'Courier New';" lang="EN-US"><font size="2">}</font></span></p>
</div>
<p></span></b></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left">맨 위에 첫줄로 xml에 입력 해 둔 데이타를 DB에 저장하고 그 뒤로는 DB에 들어간 값들을 가지고 테스트를 할 수 있습니다.</p>
<p>음~ 모든 필드들을 다 채워 넣은 다음에 다음과 같은 것들을 테스트 해보고 싶습니다.</p>
<ul>
<li>Agile Java 그룹에 속한 멤버들 중에 이메일에 k가 들어가는 멤버 확인(Group-&gt;MemberGroup-&gt;Member)</li>
<li>keesun이라는 멤버가 속한 그룹의 이름 확인.(Member-&gt;MemberGroup-&gt;Group)</li>
<li>keesun이라는 멤버가 가진 이메일 주소 확인.(Member-&gt;Messenger)</li>
<li>Messenger 중에 MSN을 사용하지 않는 멤버들의 email.(Messenger-&gt;Member)</li>
</ul>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-align: left;" align="left">이렇게 해보면 연관관계가 제대로 되어 있는지 확인 할 수 있을 것 같습니다.</p>
