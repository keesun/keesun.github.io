<p>참조 : <a href="http://monkeyisland.pl/2008/02/01/deathwish/" target="_blank">http://monkeyisland.pl/2008/02/01/deathwish/</a></p>
<p>이지목 스타일은 녹화 -&gt; 플레이 -&gt; 확인(expect -&gt; run -&gt; verify) 순으로 mocking 또는 stubbing 하는 거였습니다. 그러나 이 스타일은 다음과 같은 단점들이 있습니다.</p>
<div style="border: 1px solid rgb(204, 204, 204); padding: 10px; background-color: rgb(247, 247, 247);">1. 테스트 메소드가 지져분해짐. <br />- 이것 저것 예측/녹화를 해줘야 하는데 그게 테스트를 위해서가 아니라 Mock을 위해서 해줘야 한다는게 좀..</p>
<p>2. 자연스러운 테스트 스타일로 느껴지지 않는다.<br />- 예측을 한 담에 실행하는게 아니라, 실행 한 다음에 예측되는 Mock의 행위를 나열해 주는게 더 자연스럽다.</p>
<p>3. 테스트가 깨지기 쉽다.<br />- 새로운 기능을 추가하면, Mock을 사용한 테스트가 왕창 깨지는 경우가 발생한다.</p>
<p>4. 보다 자세한 실패 메시지를 보여줄 수 있었을 텐데...</p>
<p>5. 보다 가독성 좋게 만들 수 있었을 텐데...</p></div>
<p>그래서 <a href="http://blog.jayfields.com/2008/02/state-based-testing.html" target="_blank">상태 기반 테스트</a>를 제공하는 <a href="http://code.google.com/p/mockito/" target="_blank">Mockito</a>를 강추 한다는거...</p>
<p>Mockito 홈에서 다음을 인용합니다.</p>
<blockquote><p>No expect-run-verify also means that <span style="color: rgb(0, 153, 102); font-weight: bold;">Mockito mocks are often ready without expensive setup upfront.</span> They aim to be <span style="color: rgb(255, 0, 0);">transparent </span>and <span style="color: rgb(255, 0, 0);">let the developer to focus on testing selected behavior rather than absorb attention</span>.</p>
<p>Mockito has very slim API, almost no time is needed to start mocking. There is only one kind of mock, there is only one way of creating mocks. <span style="background-color: rgb(208, 255, 157);">Just remember that </span><span style="color: rgb(0, 153, 102); font-weight: bold; background-color: rgb(208, 255, 157);">stubbing goes before execution</span><span style="background-color: rgb(208, 255, 157);">, </span><span style="color: rgb(0, 153, 102); font-weight: bold; background-color: rgb(208, 255, 157);">verifications of interactions go afterwards</span>. You'll soon notice how natural is that kind of mocking when test-driving java code.</p></blockquote>
<p>즉 stubbing -&gt; execution -&gt; verification 라고 할 수 있겠네요. 훔.. 그래도 왠지 expect -&gt; run -&gt; verify 형태와 비슷해 보이네요.</p>
<p>사용법은 <a href="http://mockito.googlecode.com/svn/branches/1.4/javadoc/org/mockito/Mockito.html" target="_blank">여기</a>에 잘 나와있습니다.</p>
