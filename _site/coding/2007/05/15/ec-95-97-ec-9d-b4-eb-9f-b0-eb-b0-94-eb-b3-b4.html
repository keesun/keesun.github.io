<p><a href="http://whiteship.tistory.com/834" target="_blank">이전 글</a>에 올렸던 상황의 코드에서 두 개의 문제를 발견 했습니다.</p>
<p><span style="font-weight: bold;">1. 멀티파트 리졸버를 등록하지 않았습니다. </span><br />엄청난 실수 입니다. -_-;;; 바보 -_- 멍청이 =_=
<div style="padding: 10px; background-color: rgb(250, 255, 169);">&nbsp; &nbsp; &lt;bean id="multipartResolver"<br />&nbsp; &nbsp; &nbsp; &nbsp; class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;property name="maxUploadSize" value="100000000" /&gt;<br />&nbsp; &nbsp; &lt;/bean&gt;</div>
<p><br style="font-weight: bold;" /><span style="font-weight: bold;">2. 필요없는 캐스팅.</span>
<div style="padding: 10px; background-color: rgb(250, 255, 169);">// &nbsp;&nbsp; &nbsp; &nbsp; response.setContentType("text/plain");<br />// &nbsp;&nbsp; &nbsp; &nbsp; if (! (request instanceof MultipartHttpServletRequest)) {<br />// &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; response.sendError(HttpServletResponse.SC_BAD_REQUEST, "Expected multipart request");<br />// &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;<br />// &nbsp;&nbsp; &nbsp; &nbsp; }<br />// &nbsp;&nbsp; &nbsp; &nbsp; MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;<br />// &nbsp;&nbsp; &nbsp; &nbsp; MultipartFile file = multipartRequest.getFile("picture");</div>
<p>이렇게 어렵게 가져올 필요없이 그냥 커맨드 객체에서 가져오면 되는데 말이죠. 책에 나온 코드 그대로 붙였더니 괜히 복잡해 졌네요. 물론 리퀘스트가 리졸버 거치면서 멀티파트리퀘스트로 바꼈는지 확인하는 코드를 위의 1번과 같은 잘못을 했을 때 유추하기에 좋습니다.</p>
<p><img src="/assets/cm203.jpg" class="aligncenter" width="380" height="473" alt="사용자 삽입 이미지" /><br /><img src="/assets/cm204.jpg" class="aligncenter" width="500" height="114" alt="사용자 삽입 이미지" /><br /><img src="/assets/dl183.jpg" class="aligncenter" width="226" height="113" alt="사용자 삽입 이미지" /><br />와~ 파일이 웹서버 위에 올라가 있지 않아서 보이지 않는 것 같은데요. Anyway 파일 업로드를 사용하여 사진을 올리고 보여주는데 성공하였습니다. 음하하하 이제 운동해야쥐~</p>
