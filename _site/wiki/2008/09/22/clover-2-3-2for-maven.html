<p><img src="/assets/48d761f8b66dd7J.jpg" class="aligncenter" width="600" height="429" alt="" filename="1.jpg" filemime="" /><br />
하핫;; 부끄럽군요. 61% ㅠ.ㅠ util쪽 테스트를 대충했었네요. 크핫;; 보완해야지. </p>
<p>참조 : <a href="http://confluence.atlassian.com/display/CLOVER/Clover+Documentation+Home" target="_blank">http://confluence.atlassian.com/display/CLOVER/Clover+Documentation+Home</a></p>
<p>안 본 사이에 버젼이 많이 올라갔습니다. 예전엔 그냥 maven-clover-plugin 쓰고 있었는데, maven-clover2-plugin이 되어있네요.</p>
<p><span style="font-weight: bold;">1. 메이븐 플러긴 설정</span></p>
<p>settings.xml 에 플러그인 그룹 설정 추가.</p>
<div style="border: 1px solid rgb(159, 211, 49); padding: 10px; background-color: rgb(231, 253, 181);" class="txc-textbox">
&lt;pluginGroups&gt;<br />
&nbsp; &nbsp; &lt;pluginGroup&gt;com.atlassian.maven.plugins&lt;/pluginGroup&gt;<br />
&lt;/pluginGroups&gt;</div>
<p>
pom.xml에 플러그인 추가.</p>
<div style="border: 1px solid rgb(121, 165, 228); padding: 10px; background-color: rgb(219, 232, 251);" class="txc-textbox">
&lt;build&gt;<br />
&nbsp; &nbsp; &lt;plugins&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; ...<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;plugin&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;groupId&gt;com.atlassian.maven.plugins&lt;/groupId&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;artifactId&gt;<span style="font-weight: bold;">maven-clover2-plugin</span>&lt;/artifactId&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;configuration&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;licenseLocation&gt;${clover2.licenseLocation}&lt;/licenseLocation&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/configuration&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;/plugin&gt;<br />
&nbsp; &nbsp; &lt;/plugins&gt;<br />
&lt;/build&gt;
</div>
<p>
<span style="font-weight: bold;">2. 사용하기</span></p>
<p>mvn clover2:instrument clover2:aggregate clover2:clover</p>
<p>기본으로 /target/site/clover 폴더에 결과물 생성.</p>
<p><span style="font-weight: bold;">3. 기능</span></p>
<p>3-1. 목표 커버리지 설정</p>
<p>- 목표 % 설정해 놓고, clover2:check를 사용해서 검사할 수 있고, 목표치와 관계없이 빌드 성공시킬려면 커맨드라인에 -DfailOnViolation=false 옵션 추가.</p>
<p>3-2. exclusion/inclusion</p>
<p>- 정규 표현식으로 할 수도 있고, &lt;includesTestSourceRoots&gt;false&lt;/includesTestSourceRoots&gt; 이거 한 줄 추가하면 테스트 소스 코드는 전부 제외할 수 있고, &lt;contextFilters&gt;try,static&lt;/contextFilters&gt; 이렇게 하면 try-catch, static 코드 블럭을 제외할 수 있음.</p>
<p>3-3. JDK 레벨 설정</p>
<p>3-4. <a title="[http://confluence.atlassian.com/display/CLOVER/Using+a+Flush+Policy]로 이동합니다." target="_blank" href="http://confluence.atlassian.com/display/CLOVER/Using+a+Flush+Policy">Clover Flush Policy</a> 설정</p>
<p>3-5. 리포트 형식 설정</p>
<p>&nbsp; &lt;generatePdf&gt;true&lt;/generatePdf&gt;<br />
&nbsp; &lt;generateXml&gt;true&lt;/generateXml&gt;<br />
&nbsp; &lt;generateHtml&gt;false&lt;/generateHtml&gt;</p>
<p>3-6. Clover DB 위치 설정</p>
<p>3-7. Clover DB 정보 가져오기</p>
<p>- clover2:log 사용해서 보면 됨.</p>
<p>3-8. 히스토리 리포트 작성</p>
<p>&lt;generateHistorical&gt;true&lt;/generateHistorical&gt;</p>
<p>3-9. 커스텀 리포트 작성</p>
<p>몰라 pass</p>
<p>3-10. Clover Goal을 Maven 빌드 Phase에 끼워넣기</p>
<p>괜찮지만 pass</p>
