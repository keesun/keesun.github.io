<p>스프링 DM은 메이븐 아키타입<a href="http://maven.apache.org/plugins/maven-archetype-plugin/" target="_blank">archetype</a>을 제공하여 스프링 DM 번들 개발 시에 사용할 수 있는 자바 프로젝트 기본 틀을 제공한다. 아키타입을 실행하려면 다음의 명령어를 사용하면 된다.</p>
<div style="border: 1px solid rgb(144, 224, 255); padding: 10px; background-color: rgb(210, 242, 255);">mvn archetype:generate</div>
<p>메이븐 플러그인이 가용한 archetype을 보여줄 것이다. 그 중에서 spring-osgi-bundle-archetype을 선택하면 된다.(현재 32번으로 설정되어 있다.) 그리고 프로젝트에 필요한 몇 가지 정보를 입력한다.(그룹id, 아티팩트id, 버전, 패키지) 가용한 모든 아키타입과 버전은 <a href="http://docs.codehaus.org/display/MAVENUSER/Archetypes+List" target="_blank">여기</a>를 참조하라.</p>
<p>물론 archetype:create를 사용해서 직접 아키타입을 설정하여 프로젝트를 생성할 수도 있다.</p>
<div style="border: 1px solid rgb(144, 224, 255); padding: 10px; background-color: rgb(210, 242, 255);">mvn archetype:create \<br />-DarchetypeGroupId=org.springframework.osgi \<br />-DarchetypeArtifactId=spring-osgi-bundle-archetype \<br />-DarchetypeVersion= &nbsp; \<br />-DgroupId=&lt;your-project-groupId&gt;&nbsp; \<br />-DartifactId=&lt;your-project-artifactId&gt; \<br />-Dversion=&lt;your-project-version&gt;</div>
<p>(과연 누가 저렇게 쓸까;;; 오타 없아 커맨드 창에 저걸 전부 입력 할 수 있는 사람~?)</p>
<p>둘 모두 같은 프로젝트 구조를 생성해준다. 그 안에 두 개의 스프링 설정 파일 src/main/resources/META-INF/spring/bundle-context.xml 와 src/main/resources/META-INF/spring/bundle-context-osgi.xml 가 있다. 프로젝트는 OSGi 번들로 패키지 형태가 설정되어 있다.</p>
<p>프로젝트에 MANIFEST.MF 파일이 없는데, 이 건 메이븐의 <a href="http://felix.apache.org/site/maven-bundle-plugin-bnd.html" target="_blank">bnd 플러그인</a>으로 자동 생성한다. 따라서 번들을 생성하고 싶으면 다음과 같이 하면 된다.</p>
<div style="border: 1px solid rgb(144, 224, 255); padding: 10px; background-color: rgb(210, 242, 255);">mvn package</div>
<p>번들 말고, MANIFEST.MF 파일만 생성하고 싶을 때는 다음과 같이 한다.</p>
<div style="border: 1px solid rgb(144, 224, 255); padding: 10px; background-color: rgb(210, 242, 255);">mvn org.apache.felix:maven-bundle-plugin:manifest</div>
<p><span style="font-weight: bold;">D.1. 생성한 프로젝트 살펴보기</span>
<ul>
<li>OSGi 번들로 패키징 함.</li>
<li>MATA-INF/MANIFEST.MF 는 자동 생성함.</li>
<li>src/main/java/&lt;package&gt; 번들이 공개할 패키지</li>
<li>src/main/java/&lt;package&gt;/internal 번들이 공개하지 않을 패키지</li>
<li>src/main/resources/META-INF/spring/bundle-context.xml 번들 내부에서 사용할 스프링 설정 파일</li>
<li>src/main/resources/META-INF/spring/bundle-context-osgi.xml OSGI 관련 스프링 설정 파일</li>
<li>.project, .classpath, 그리고 build.properties 파일은 이 프로젝트를 이클립스 PDE 플러긴 프로젝트로 인식하게 해 줌.</li>
</ul>
<p></p>
